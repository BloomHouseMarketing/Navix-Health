---
import BaseHead from '../components/BaseHead.astro';
import Navigation from '../components/global/Navigation.astro';
import Footer from '../components/global/Footer.astro';
---

<html lang='en'>
  <head>
    <BaseHead
      title={Astro.props.title}
      description={Astro.props.description}
      canonical={Astro.props.canonical}
      openGraph={Astro.props.openGraph}
    />
  </head>

  <body>
    <div class='page-wrapper'>
      <Navigation />
      <slot />
      <Footer />
    </div>
    <script
      is:inline
      src='https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6555be379988c4033408077d'
      type='text/javascript'
      integrity='sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0='
      crossorigin='anonymous'></script>
    <script src='/src/js/webflow.js'></script>
    <script is:inline src='https://unpkg.com/aos@2.3.1/dist/aos.js'></script>
    <script is:inline>
      AOS.init();
      AOS.init({
        once: true,
      });
    </script>
    <script
      is:inline
      src='https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js'
    ></script>
    <script
      is:inline
      src='https://cdn.jsdelivr.net/npm/jquery.marquee@1.6.0/jquery.marquee.min.js'
      type='text/javascript'></script>
    <script
      is:inline
      src='https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js'
    ></script>
    <script is:inline>
      var splide = new splide('.splide', {
        type: 'loop',
        perPage: 2,
        perMove: 1,
      });
      splide.mount();
    </script>
    <script is:inline>
      $(document).ready(function () {
        $('.marquee').marquee({
          duration: 16000,
          delayBeforeStart: 0,
          direction: 'left',
          duplicated: true,
          startVisible: true,
        });
      });
    </script>
    <script
      is:inline
      src='https://unpkg.com/leader-line@1.0.5/leader-line.min.js'></script>
    <script is:inline>
      if (window.innerWidth >= 991) {
        var startElement = document.getElementById('one'),
          endElement = document.getElementById('two');
        new LeaderLine(startElement, endElement, {
          color: '#E9E5E2',
          dash: true,
          endPlug: 'behind',
          path: 'arc',
          endSocket: 'top',
        });
        var startElement1 = document.getElementById('two'),
          endElement1 = document.getElementById('three');
        new LeaderLine(startElement1, endElement1, {
          color: '#E9E5E2',
          dash: true,
          endPlug: 'behind',
          path: 'fluid',
          startSocket: 'center',
          endSocket: 'top',
        });
        var startElement2 = document.getElementById('three'),
          endElement2 = document.getElementById('four');
        new LeaderLine(startElement2, endElement2, {
          color: '#E9E5E2',
          dash: true,
          endPlug: 'behind',
          path: 'arc',
          startSocket: 'center',
          endSocket: 'top',
        });
      }
    </script>
    <script is:inline>
      $('input[type="range"]').on('input', function () {
        if ($(this).parent().hasClass('is-avc')) {
          $('.is-bps').find('input[type="range"]').val($(this).val());
          $('.is-bps').find('.value-cost').val($(this).val());
          $('.is-pnm')
            .find('input[type="range"]')
            .val($(this).val() * 4);
          $('.is-pnm')
            .find('.value-cost')
            .val($(this).val() * 4);
          $('.is-avc').not(this).find('.value-cost').val($(this).val());
          $('.is-avc').not(this).find('input[type="range"]').val($(this).val());
          // for 2nd calculator
          $('.is-total-cpn')
            .find('input[type="range"]')
            .val($('.is-pnm input').val() * 0.5);
          $('.is-total-cpn')
            .find('.value-cost')
            .val($('.is-pnm input').val() * 0.5);
          $('.is-total-bps')
            .find('input[type="range"]')
            .val($('.is-bps input').val() * 0.5);
          $('.is-total-bps')
            .find('.value-cost')
            .val($('.is-bps input').val() * 0.5);
          //for 3rd calculator
          $('.is-total-cpn-ai')
            .find('input[type="range"]')
            .val(($('.is-pnm input').val() * 0.0333333333333333).toFixed(2));
          $('.is-total-cpn-ai')
            .find('.value-cost')
            .val(($('.is-pnm input').val() * 0.0333333333333333).toFixed(2));
          $('.is-total-bps-ai')
            .find('input[type="range"]')
            .val(($('.is-bps input').val() * 0.0333333333333333).toFixed(2));
          $('.is-total-bps-ai')
            .find('.value-cost')
            .val(($('.is-bps input').val() * 0.0333333333333333).toFixed(2));
        } else if ($(this).parent().hasClass('is-avt')) {
          $('.is-avt').not(this).find('.value-cost').val($(this).val());
          $('.is-avt').not(this).find('input[type="range"]').val($(this).val());
        }
        let ourInputField = $(this).siblings('.value-cost');
        ourInputField.val($(this).val());
        // This will make sure that fill is applied in initial state
        $('input[type="range"]').each(function () {
          applyFill($(this).get(0));
        });
      });
      // For Our Input Field
      $('.value-cost').on('input', function () {
        if ($(this).parent().hasClass('is-avc')) {
          $('.is-bps').find('input[type="range"]').val($(this).val());
          $('.is-bps').find('.value-cost').val($(this).val());
          $('.is-pnm')
            .find('input[type="range"]')
            .val($(this).val() * 4);
          $('.is-pnm')
            .find('.value-cost')
            .val($(this).val() * 4);
          $('.is-avc').not(this).find('.value-cost').val($(this).val());
          $('.is-avc').not(this).find('input[type="range"]').val($(this).val());
          // for 2nd calculator
          $('.is-total-cpn')
            .find('input[type="range"]')
            .val($('.is-pnm input').val() * 0.5);
          $('.is-total-cpn')
            .find('.value-cost')
            .val($('.is-pnm input').val() * 0.5);
          $('.is-total-bps')
            .find('input[type="range"]')
            .val($('.is-bps input').val() * 0.5);
          $('.is-total-bps')
            .find('.value-cost')
            .val($('.is-bps input').val() * 0.5);
          //for 3rd calculator
          $('.is-total-cpn-ai')
            .find('input[type="range"]')
            .val(($('.is-pnm input').val() * 0.0333333333333333).toFixed(2));
          $('.is-total-cpn-ai')
            .find('.value-cost')
            .val(($('.is-pnm input').val() * 0.0333333333333333).toFixed(2));
          $('.is-total-bps-ai')
            .find('input[type="range"]')
            .val(($('.is-bps input').val() * 0.0333333333333333).toFixed(2));
          $('.is-total-bps-ai')
            .find('.value-cost')
            .val(($('.is-bps input').val() * 0.0333333333333333).toFixed(2));
        } else if ($(this).parent().hasClass('is-avt')) {
          $('.is-avt').not(this).find('.value-cost').val($(this).val());
          $('.is-avt').not(this).find('input[type="range"]').val($(this).val());
        }
        let ourInputField = $(this).siblings('input[type="range"]');
        ourInputField.val($(this).val());
        // 2. apply our fill to the input Sliders
        $('input[type="range"]').each(function () {
          applyFill($(this).get(0));
        });
      });
      // This will make sure that fill is applied in initial state
      $('input[type="range"]').each(function () {
        applyFill($(this).get(0));
      });
      function applyFill(slider) {
        const percentage =
          (100 * (slider.value - slider.min)) / (slider.max - slider.min);
        const colorFill =
          'linear-gradient( 90deg, rgba(157, 183, 176, 1) ' +
          percentage +
          '% , rgba(234, 236, 240, 1) ' +
          percentage +
          '%)';
        slider.style.background = colorFill;
      }
      // Event handler for form submission (optional)
      $('.email-form').on('submit', function (event) {
        // Prevent form submission if needed
        event.preventDefault();
        event.stopPropagation();
        updateResult();
        updateResult1();
        updateResult2();
        finalresult();
        // Update result on form submission
      });
      var isRes1, isRes3, isRes5;
      //For 1st calculator
      function updateResult() {
        var isPnm = parseFloat($('.is-pnm input').val());
        var isBps = parseFloat($('.is-bps input').val());
        var isScribe = parseFloat($('.is-scribe input').val());
        var isBpsCost = parseFloat($('.is-bps-cost input').val());
        isRes1 = (
          parseFloat(isPnm * isScribe) + parseFloat(isBps * isBpsCost)
        ).toFixed(2);
        $('.total-value').html(isRes1);
      }
      //For 2nd calculator
      function updateResult1() {
        var isTotalCpn = parseFloat($('.is-total-cpn input').val());
        var isTotalBps = parseFloat($('.is-total-bps input').val());
        var isAvt = parseFloat($('.is-avt input').val());
        var isRes2 = parseFloat(isTotalCpn + isTotalBps).toFixed(2);
        isRes3 = parseFloat(isRes2 * isAvt).toFixed(2);
        $('.total-value-1').html(isRes2);
        $('.total-value-2').html(isRes3);
      }
      //For 3rd calculator
      function updateResult2() {
        var isTotalCpnAi = parseFloat($('.is-total-cpn-ai input').val());
        var isTotalBpsAi = parseFloat($('.is-total-bps-ai input').val());
        var isAvt = parseFloat($('.is-avt input').val());
        var isRes4 = parseFloat(isTotalCpnAi + isTotalBpsAi).toFixed(2);
        isRes5 = parseFloat(isRes4 * isAvt).toFixed(2);
        $('.total-value-3').html(isRes4);
        $('.total-value-4').html(isRes5);
      }
      function finalresult() {
        var isFinalAns = (
          parseFloat(isRes3) -
          (parseFloat(isRes1) + parseFloat(isRes5))
        ).toFixed(2);
        $('.final-ans-text').html(isFinalAns);
      }
    </script>
  </body>
</html>
